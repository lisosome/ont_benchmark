process {
    executor = 'slurm'
    scratch = true
    errorStrategy = 'finish'


    withName: NANOSV {
        conda = "${projectDir}/envs/nanosv.yaml"
        clusterOptions = "--mem-per-cpu=40gb --cpus-per-task=8 --ntasks-per-node=1 --time=144:00:00 -p THIN -A burlo -J NanoSV"
    }

    withName: DUET {
        container = "docker://lisosome/duet:1.0.0"
        clusterOptions = "--mem-per-cpu=20gb --cpus-per-task=8 --ntasks-per-node=1 --time=144:00:00 -p THIN -A burlo -J duet"
    }

    withName: SNIFFLES {
        conda = "${projectDir}/envs/sniffles.yaml"
        clusterOptions = "--mem-per-cpu=20gb --cpus-per-task=8 --ntasks-per-node=1 --time=144:00:00 -p THIN -A burlo -J sniffles"
    }

    withName: NANOVAR {
        container = "docker://lisosome/ont_benchmark:final"
        clusterOptions = "--mem-per-cpu=20gb --cpus-per-task=8 --ntasks-per-node=1 --time=144:00:00 -p THIN -A burlo -J nanovar"
    }

    withName: CAMPHOR {
        clusterOptions = "--mem-per-cpu=20gb --cpus-per-task=8 --ntasks-per-node=1 --time=144:00:00 -p THIN -A burlo -J camphor"
    }

    withName: CUTESV {
        container = "docker://lisosome/ont_benchmark:final"
        clusterOptions = "--mem-per-cpu=20gb --cpus-per-task=8 --ntasks-per-node=1 --time=144:00:00 -p THIN -A burlo -J cutesv"
    }

    withName: BENCHMARK {
        container = "docker://lisosome/wittyer:master"
        clusterOptions = "--mem-per-cpu=20gb --cpus-per-task=8 --ntasks-per-node=1 --time=144:00:00 -p THIN -A burlo -J benchmark"
    }
}

executor {
    name = 'slurm'
    queueSize = 15
    submitRateLimit = '15/40min'
}



singularity {
    enabled = true
    cacheDir = "/fast/burlo/nardone/singularity/cache/cache"
    runOptions = "--bind /orfeo/cephfs/scratch/burlo/nardone/vcf_SV_valentina/ont_benchmark -e -w"
}

conda {
    enabled = true
    createOptions = "-y"
}
